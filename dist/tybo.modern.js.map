{"version":3,"file":"tybo.modern.js","sources":["../lib/app/javascript/controllers/attachments_controller.js","../lib/app/javascript/controllers/dropdown_controller.js","../lib/app/javascript/controllers/flash_controller.js","../lib/app/javascript/controllers/search_form_controller.js","../lib/app/javascript/controllers/ts/search_controller.js","../lib/app/javascript/controllers/ts/select_controller.js"],"sourcesContent":["import { Controller } from \"@hotwired/stimulus\"\nimport { FetchRequest, patch } from '@rails/request.js'\n\nexport default class extends Controller {\n  static values = { url: String, method: String, attachmentId: Number }\n\n  async toggle(event) {\n    event.preventDefault()\n\n    const request = new FetchRequest(this.methodValue, this.urlValue, {responseKind: \"turbo-stream\", body: { attachment_id: this.attachmentIdValue}})\n    const response = await request.perform()\n    if (response.ok) {}\n  }\n}\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"menu\"]\n\n  toggle() {\n    this.menuTarget.classList.toggle(\"hidden\")\n  }\n\n  hide(event) {\n    if (!this.element.contains(event.target) && !this.menuTarget.classList.contains('hidden')) {\n      this.menuTarget.classList.add(\"hidden\")\n    }\n  }\n}\n","import { Controller } from \"@hotwired/stimulus\";\n\nexport default class extends Controller {\n    dismiss() {\n        this.element.remove();\n    }\n}\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"form\"]\n\n  search() {\n    const exportBtn = document.getElementById(\"exportBtn\");\n    if (exportBtn) {\n      const params = this.getQueryParams();\n      const originalHref = exportBtn.getAttribute(\"href\");\n      exportBtn.setAttribute(\"href\", `${originalHref}?${params}`)\n    }\n    clearTimeout(this.timeout)\n    this.timeout = setTimeout(() => {\n      this.formTarget.requestSubmit()\n    }, 200)\n  }\n\n  getQueryParams() {\n    const formData = new FormData(this.formTarget);\n    const params = new URLSearchParams(formData).toString();\n    return params;\n  }\n\n  setBooleanField(e) {\n    let value = e.target.getAttribute('data-value')\n    let targetId = e.target.getAttribute('data-target-id')\n    let target = document.getElementById(targetId)\n    target.value = value\n    this.formTarget.requestSubmit()\n  }\n\n}\n","// app/javascript/controllers/ts/search_controller.js\n\nimport { Controller } from \"@hotwired/stimulus\"\nimport { get } from '@rails/request.js'\nimport TomSelect from \"tom-select\"\n\n// Connects to data-controller=\"ts--search\"\nexport default class extends Controller {\n  static values = { url: String }\n\n  connect() {\n\n    var config = {\n      plugins: ['clear_button'],\n      valueField: 'value',\n      load: (q, callback) => this.search(q, callback)\n    }\n    new TomSelect(this.element, config)\n  }\n\n  async search(q, callback) {\n    const response = await get(this.urlValue, {\n      query: { q: q },\n      responseKind: 'json'\n    })\n\n    if (response.ok) {\n      const list = await response.json\n      callback(list)\n    } else {\n      callback()\n    }\n  }\n\n}\n","import { Controller } from \"@hotwired/stimulus\"\nimport TomSelect from \"tom-select\"\n\n// Connects to data-controller=\"ts--select\"\nexport default class extends Controller {\n  connect() {\n    new TomSelect(this.element, { create: false, plugins: ['remove_button'] })\n  }\n}\n"],"names":["Controller","async","event","preventDefault","this","methodValue","urlValue","responseKind","body","attachment_id","attachmentIdValue","request","perform","_class","values","url","String","method","attachmentId","Number","toggle","menuTarget","classList","hide","element","contains","target","add","targets","dismiss","remove","search","exportBtn","document","getElementById","params","getQueryParams","originalHref","getAttribute","setAttribute","clearTimeout","timeout","setTimeout","formTarget","requestSubmit","FormData","URLSearchParams","formData","toString","setBooleanField","e","value","targetId","connect","TomSelect","plugins","valueField","load","q","callback","response","get","query","ok","json","create"],"mappings":"oJAGwCA,EAGtCC,aAAaC,GACXA,EAAMC,iBAEN,QAAgB,MAAiBC,KAAKC,YAAaD,KAAKE,SAAU,CAACC,aAAc,eAAgBC,KAAM,CAAEC,cAAeL,KAAKM,2BACtGC,EAAQC,SAEjC,EACDC,EATQC,OAAS,CAAEC,IAAKC,OAAQC,OAAQD,OAAQE,aAAcC,QCFlCnB,MAAAA,UAAAA,EAG3BoB,SACEhB,KAAKiB,WAAWC,UAAUF,OAAO,SACnC,CAEAG,KAAKrB,GACEE,KAAKoB,QAAQC,SAASvB,EAAMwB,SAAYtB,KAAKiB,WAAWC,UAAUG,SAAS,WAC9ErB,KAAKiB,WAAWC,UAAUK,IAAI,SAElC,EACDd,EAXQe,QAAU,CAAC,wBCDoB5B,EACpC6B,UACIzB,KAAKoB,QAAQM,QACjB,kBCHoC9B,EAGtC+B,SACE,MAAMC,EAAYC,SAASC,eAAe,aAC1C,GAAIF,EAAW,CACb,MAAMG,EAAS/B,KAAKgC,iBACdC,EAAeL,EAAUM,aAAa,QAC5CN,EAAUO,aAAa,OAAS,GAAEF,KAAgBF,IACpD,CACAK,aAAapC,KAAKqC,SAClBrC,KAAKqC,QAAUC,WAAW,KACxBtC,KAAKuC,WAAWC,iBACf,IACL,CAEAR,iBACE,QAAiB,IAAYS,SAACzC,KAAKuC,YAEnC,OADe,IAAmBG,gBAACC,GAAUC,UAE/C,CAEAC,gBAAgBC,GACd,IAAIC,EAAQD,EAAExB,OAAOY,aAAa,gBACnBY,EAAExB,OAAOY,aAAa,kBACxBL,SAASC,eAAekB,GAC9BD,MAAQA,EACf/C,KAAKuC,WAAWC,eAClB,EAED/B,EA7BQe,QAAU,CAAC,QCIL,MAAAf,UAAyBb,EAGtCqD,UAOE,IAAaC,EAAClD,KAAKoB,QALN,CACX+B,QAAS,CAAC,gBACVC,WAAY,QACZC,KAAM,CAACC,EAAGC,IAAavD,KAAK2B,OAAO2B,EAAGC,IAG1C,CAEA1D,aAAayD,EAAGC,GACd,MAAMC,QAAoBC,EAACzD,KAAKE,SAAU,CACxCwD,MAAO,CAAEJ,EAAGA,GACZnD,aAAc,SAGZqD,EAASG,GAEXJ,QAD2BC,EAACI,MAG5BL,GAEJ,EAED9C,EA1BQC,OAAS,CAAEC,IAAKC,QCJIhB,MAAAA,UAAAA,EAC3BqD,UACE,IAAaC,EAAClD,KAAKoB,QAAS,CAAEyC,QAAQ,EAAOV,QAAS,CAAC,kBACzD"}
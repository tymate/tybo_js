{"version":3,"file":"tybo.umd.js","sources":["../lib/app/javascript/controllers/attachments_controller.js","../lib/app/javascript/controllers/dropdown_controller.js","../lib/app/javascript/controllers/flash_controller.js","../lib/app/javascript/controllers/search_form_controller.js","../lib/app/javascript/controllers/ts/search_controller.js","../lib/app/javascript/controllers/ts/select_controller.js","../lib/app/javascript/controllers/sidebar_controller.js"],"sourcesContent":["import { Controller } from \"@hotwired/stimulus\"\nimport { FetchRequest, patch } from '@rails/request.js'\n\nexport default class extends Controller {\n  static values = { url: String, method: String, attachmentId: Number }\n\n  async toggle(event) {\n    event.preventDefault()\n\n    const request = new FetchRequest(this.methodValue, this.urlValue, {responseKind: \"turbo-stream\", body: { attachment_id: this.attachmentIdValue}})\n    const response = await request.perform()\n    if (response.ok) {}\n  }\n}\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"menu\"]\n\n  toggle() {\n    this.menuTarget.classList.toggle(\"hidden\")\n  }\n\n  hide(event) {\n    if (!this.element.contains(event.target) && !this.menuTarget.classList.contains('hidden')) {\n      this.menuTarget.classList.add(\"hidden\")\n    }\n  }\n}\n","import { Controller } from \"@hotwired/stimulus\";\n\nexport default class extends Controller {\n    dismiss() {\n        this.element.remove();\n    }\n}\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"form\"]\n\n  search() {\n    const exportBtn = document.getElementById(\"exportBtn\");\n    let originalHref = exportBtn.getAttribute(\"href\");\n    if (exportBtn) {\n      originalHref = originalHref.split('?')[0];\n\n      const params = this.getQueryParams();\n      exportBtn.setAttribute(\"href\", `${originalHref}?${params}`)\n    }\n    clearTimeout(this.timeout)\n    this.timeout = setTimeout(() => {\n      this.formTarget.requestSubmit()\n    }, 200)\n  }\n\n\n\n  getQueryParams() {\n    const formData = new FormData(this.formTarget);\n    const params = new URLSearchParams(formData).toString();\n    return params;\n  }\n\n  setBooleanField(e) {\n    let value = e.target.getAttribute('data-value')\n    let targetId = e.target.getAttribute('data-target-id')\n    let target = document.getElementById(targetId)\n    target.value = value\n    this.formTarget.requestSubmit()\n  }\n\n}\n","// app/javascript/controllers/ts/search_controller.js\n\nimport { Controller } from \"@hotwired/stimulus\"\nimport { get } from '@rails/request.js'\nimport TomSelect from \"tom-select\"\n\n// Connects to data-controller=\"ts--search\"\nexport default class extends Controller {\n  static values = { url: String }\n\n  connect() {\n\n    var config = {\n      plugins: ['clear_button'],\n      valueField: 'value',\n      load: (q, callback) => this.search(q, callback)\n    }\n    new TomSelect(this.element, config)\n  }\n\n  async search(q, callback) {\n    const response = await get(this.urlValue, {\n      query: { q: q },\n      responseKind: 'json'\n    })\n\n    if (response.ok) {\n      const list = await response.json\n      callback(list)\n    } else {\n      callback()\n    }\n  }\n\n}\n","import { Controller } from \"@hotwired/stimulus\"\nimport TomSelect from \"tom-select\"\n\n// Connects to data-controller=\"ts--select\"\nexport default class extends Controller {\n  connect() {\n    new TomSelect(this.element, { create: false, plugins: ['remove_button'] })\n  }\n}\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"sidebar\", \"bg\"];\n\n  toggle() {\n    this.sidebarTarget.classList.toggle(\"-translate-x-full\");\n    this.bgTarget.classList.toggle(\"opacity-100\");\n\n  }\n\n  close() {\n    this.sidebarTarget.classList.add(\"-translate-x-full\");\n    this.bgTarget.classList.remove(\"opacity-100\");\n    this.bgTarget.classList.add(\"opacity-0\");\n  }\n}\n"],"names":["toggle","event","_this2","this","preventDefault","request","FetchRequest","methodValue","urlValue","responseKind","body","attachment_id","attachmentIdValue","perform","response","Controller","_default","values","url","String","method","attachmentId","Number","_Controller","apply","arguments","_inheritsLoose","_proto","prototype","menuTarget","classList","hide","element","contains","target","add","targets","dismiss","remove","search","_this","document","getElementById","originalHref","exportBtn","getAttribute","split","params","getQueryParams","setAttribute","clearTimeout","timeout","setTimeout","formTarget","requestSubmit","URLSearchParams","formData","toString","setBooleanField","e","value","targetId","connect","TomSelect","plugins","valueField","load","q","callback","get","query","ok","Promise","resolve","json","then","list","_temp","reject","create","sidebarTarget","bgTarget","close"],"mappings":"6yBAMQA,OAAM,SAACC,GAAO,IAAA,IAAAC,EAGeC,KAFjCF,EAAMG,iBAEN,IAAaC,EAAG,IAAgBC,eAACJ,EAAKK,YAAaL,EAAKM,SAAU,CAACC,aAAc,eAAgBC,KAAM,CAAEC,cAAeT,EAAKU,qBACtGP,OAAAA,QAAAA,QAAAA,EAAQQ,yBAAzBC,GAER,GAAC,uCAT0BC,EAAUA,YAAAC,EAC9BC,OAAS,CAAEC,IAAKC,OAAQC,OAAQD,OAAQE,aAAcC,QCJhBN,IAAAA,eAAA,SAAAO,GAAA,SAAAP,IAAA,OAAAO,EAAAC,MAAArB,KAAAsB,YAAAtB,IAAA,CAAAuB,EAAAV,EAAAO,GAAA,IAAAI,EAAAX,EAAAY,UAa5C,OAb4CD,EAK7C3B,OAAA,WACEG,KAAK0B,WAAWC,UAAU9B,OAAO,SACnC,EAAC2B,EAEDI,KAAA,SAAK9B,GACEE,KAAK6B,QAAQC,SAAShC,EAAMiC,SAAY/B,KAAK0B,WAAWC,UAAUG,SAAS,WAC9E9B,KAAK0B,WAAWC,UAAUK,IAAI,SAElC,EAACnB,CAAA,CAb4C,CAElBD,EAAUA,YAC9BqB,EAAAA,QAAU,CAAC,QCH4BpB,IAAAA,eAAA,SAAAO,GAAA,SAAAP,IAAA,OAAAO,EAAAC,MAAArB,KAAAsB,YAAAtB,IAAA,QAAAuB,EAAAV,EAAAO,GAAAP,EAAAY,UAG5CS,QAAA,WACIlC,KAAK6B,QAAQM,QACjB,IAL4C,CAEnBvB,EAAUA,2HCGrCwB,OAAA,WACE,IAAAC,EAAArC,OAAkBsC,SAASC,eAAe,aAC1BC,EAAGC,EAAUC,aAAa,QAC1C,GAAID,EAAW,CACbD,EAAeA,EAAaG,MAAM,KAAK,GAEvC,IAAMC,EAAS5C,KAAK6C,iBACpBJ,EAAUK,aAAa,OAAWN,EAAgBI,IAAAA,EACpD,CACAG,aAAa/C,KAAKgD,SAClBhD,KAAKgD,QAAUC,WAAW,WACxBZ,EAAKa,WAAWC,eAClB,EAAG,IACL,EAAC3B,EAIDqB,eAAA,WACE,MAAiB,aAAa7C,KAAKkD,YAEnC,OADe,IAAIE,gBAAgBC,GAAUC,UAE/C,EAAC9B,EAED+B,gBAAA,SAAgBC,GACd,IAASC,EAAGD,EAAEzB,OAAOW,aAAa,cAC9BgB,EAAWF,EAAEzB,OAAOW,aAAa,kBACxBJ,SAASC,eAAemB,GAC9BD,MAAQA,EACfzD,KAAKkD,WAAWC,eAClB,KAhC2BvC,EAAUA,YAAAC,EAC9BoB,QAAU,CAAC,QCOlB0B,IAAAA,eAAAA,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CAAAA,EAAAA,EAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAsBC,OAtBDA,EAAAA,QAAA,WAEE,IAAAtB,EAAArC,KAKA,IAAI4D,EAAS,QAAC5D,KAAK6B,QALN,CACXgC,QAAS,CAAC,gBACVC,WAAY,QACZC,KAAM,SAACC,EAAGC,GAAa,OAAA5B,EAAKD,OAAO4B,EAAGC,EAAS,GAGnD,IAEM7B,OAAM,SAAC4B,EAAGC,GAAQ,IACCC,OAAAA,QAAAA,QAAAA,EAAAA,IAAIlE,KAAKK,SAAU,CACxC8D,MAAO,CAAEH,EAAGA,GACZ1D,aAAc,UAFVK,KAAAA,SAAAA,uBAKFA,EAASyD,GAAE,OAAAC,QAAAC,QACM3D,EAAS4D,MAAIC,KAAA,SAA1BC,GACNR,EAASQ,EAAK,GAEdR,GAAU,IAAA,GAAAS,GAAAA,EAAAF,KAAA,OAAAE,EAAAF,KAAA,WAAA,EAAA,EAEb,CAAA,MAAAhB,GAAA,OAAAa,QAAAM,OAAAnB,EAAA,CAAA,EAAA3C,CAAA,CAtBD8C,CAH2B/C,EAAUA,YAAAC,EAC9BC,OAAS,CAAEC,IAAKC,QCPS,IAAAH,eAAA,SAAAO,GAAA,SAAAP,IAAA,OAAAO,EAAAC,MAAArB,KAAAsB,YAAAtB,IAAA,QAAAuB,EAAAV,EAAAO,GAAAP,EAAAY,UAIhCkC,QAAA,WACE,MAAa,QAAC3D,KAAK6B,QAAS,CAAE+C,QAAQ,EAAOf,QAAS,CAAC,kBACzD,IANgC,CAGLjD,EAAUA,YCCrCf,eAAAA,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CAAAA,EAAAA,EAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAH2Be,OAG3Bf,EAAAA,OAAA,WACEG,KAAK6E,cAAclD,UAAU9B,OAAO,qBACpCG,KAAK8E,SAASnD,UAAU9B,OAAO,cAEjC,IAEAkF,MAAA,WACE/E,KAAK6E,cAAclD,UAAUK,IAAI,qBACjChC,KAAK8E,SAASnD,UAAUQ,OAAO,eAC/BnC,KAAK8E,SAASnD,UAAUK,IAAI,YAC9B,EAb2BpB,CAAAA,CAG3Bf,CAH2Be,EAAUA,cAC9BqB,QAAU,CAAC,UAAW"}
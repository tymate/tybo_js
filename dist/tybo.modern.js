import{Controller as t}from"@hotwired/stimulus";import{FetchRequest as e,get as s}from"@rails/request.js";import a from"tom-select";class r extends t{async toggle(t){t.preventDefault();const s=new e(this.methodValue,this.urlValue,{responseKind:"turbo-stream",body:{attachment_id:this.attachmentIdValue}});await s.perform()}}r.values={url:String,method:String,attachmentId:Number};class n extends t{toggle(){this.menuTarget.classList.toggle("hidden")}hide(t){this.element.contains(t.target)||this.menuTarget.classList.contains("hidden")||this.menuTarget.classList.add("hidden")}}n.targets=["menu"];class i extends t{dismiss(){this.element.remove()}}class o extends t{search(){const t=document.getElementById("exportBtn");let e=t.getAttribute("href");if(t){e=e.split("?")[0];const s=this.getQueryParams();t.setAttribute("href",`${e}?${s}`)}clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.formTarget.requestSubmit()},200)}getQueryParams(){const t=new FormData(this.formTarget);return new URLSearchParams(t).toString()}setBooleanField(t){let e=t.target.getAttribute("data-value"),s=t.target.getAttribute("data-target-id");document.getElementById(s).value=e,this.formTarget.requestSubmit()}}o.targets=["form"];class l extends t{connect(){new a(this.element,{plugins:["clear_button"],valueField:"value",load:(t,e)=>this.search(t,e)})}async search(t,e){const a=await s(this.urlValue,{query:{q:t},responseKind:"json"});a.ok?e(await a.json):e()}}l.values={url:String};class m extends t{connect(){new a(this.element,{create:!1,plugins:["remove_button"]})}}export{r as Attachments,n as Dropdown,i as Flash,o as SearchForm,l as TsSearch,m as TsSelect};
//# sourceMappingURL=tybo.modern.js.map
